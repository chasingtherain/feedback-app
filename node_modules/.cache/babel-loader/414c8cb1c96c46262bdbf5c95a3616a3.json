{"ast":null,"code":"import _slicedToArray from\"/Users/jp/Desktop/projects/React-Projects/feedback-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import Card from'./shared/Card';import Button from'./shared/Button';import RatingSelect from'./RatingSelect';import FeedbackContext from'../context/FeedbackContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeedbackForm(){var _useContext=useContext(FeedbackContext),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),validationText=_useState4[0],setValidationText=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),disabled=_useState6[0],setDisabled=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),rating=_useState8[0],setRating=_useState8[1];useEffect(function(){if(feedbackEdit.edit){setDisabled(false);setText(feedbackEdit.item.text);}},[feedbackEdit]);var handleTextChange=function handleTextChange(event){event.preventDefault();console.log(event.target.value.length);if(text===\"\"){setValidationText(null);setDisabled(true);}else if(text.length<10){setValidationText(\"Your review is too short, please have at least 10 characters!\");setDisabled(true);}else{setValidationText(null);setDisabled(false);}setText(event.target.value);};var handleSubmit=function handleSubmit(event){event.preventDefault();if(text.trim().length>10){var newFeedback={text:text,rating:rating};if(feedbackEdit.edit)updateFeedback(feedbackEdit.item.id,newFeedback);else addFeedback(newFeedback);setText(\"\");setRating(null);}};return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would you rate our service?\"}),/*#__PURE__*/_jsx(RatingSelect,{select:function select(rating){return setRating(rating);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:handleTextChange,placeholder:\"Write a review\",value:text}),/*#__PURE__*/_jsx(Button,{type:\"submit\",value:text,isDisabled:disabled,children:\"Send\"})]})]}),validationText&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:validationText})]});}export default FeedbackForm;","map":{"version":3,"names":["React","useContext","useEffect","useState","Card","Button","RatingSelect","FeedbackContext","FeedbackForm","addFeedback","feedbackEdit","updateFeedback","text","setText","validationText","setValidationText","disabled","setDisabled","rating","setRating","edit","item","handleTextChange","event","preventDefault","console","log","target","value","length","handleSubmit","trim","newFeedback","id"],"sources":["/Users/jp/Desktop/projects/React-Projects/feedback-app/src/components/FeedbackForm.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport Card from './shared/Card'\nimport Button from './shared/Button'\nimport RatingSelect from './RatingSelect'\nimport FeedbackContext from '../context/FeedbackContext'\n\nfunction FeedbackForm() {\nconst {addFeedback, feedbackEdit, updateFeedback} = useContext(FeedbackContext)\nconst [text, setText] = useState(\"\")\nconst [validationText, setValidationText] = useState(\"\")\nconst [disabled, setDisabled] = useState(true)\nconst [rating, setRating] = useState(null)\n\nuseEffect(()=> {\n    if(feedbackEdit.edit){\n        setDisabled(false)\n        setText(feedbackEdit.item.text)\n    }\n},[feedbackEdit])\n\nconst handleTextChange = (event) => {\n    event.preventDefault()\n    console.log(event.target.value.length);\n    if(text === \"\") {\n        setValidationText(null)\n        setDisabled(true)\n    }\n    else if(text.length < 10){\n        setValidationText(\"Your review is too short, please have at least 10 characters!\")\n        setDisabled(true)\n    }\n    else {\n        setValidationText(null)\n        setDisabled(false)\n    }\n    setText(event.target.value);\n}\n\nconst handleSubmit = (event) => {\n    event.preventDefault()\n    if(text.trim().length > 10){\n        const newFeedback = {\n            text,\n            rating\n        }\n        if(feedbackEdit.edit) updateFeedback(feedbackEdit.item.id, newFeedback)\n        else addFeedback(newFeedback)\n        setText(\"\")\n        setRating(null)\n    }\n    \n}\n    return (\n    <Card>\n        <form onSubmit={handleSubmit}>\n            <h2>How would you rate our service?</h2>\n            <RatingSelect select={(rating)=> setRating(rating)}/>\n            <div className='input-group'>\n                <input type=\"text\" onChange={handleTextChange} placeholder='Write a review' value={text}/>\n                <Button type='submit' value={text} isDisabled={disabled}>Send</Button>\n            </div>\n        </form>\n        {validationText && <div className='message'>{validationText}</div>}\n    </Card>\n    )\n}\n\nexport default FeedbackForm"],"mappings":"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"},"metadata":{},"sourceType":"module"}